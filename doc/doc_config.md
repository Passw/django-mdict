### 设置

以下功能大多需要下一次查询生效，即开启后重新查询生成页面。

* 键盘的enter键绑定查询按钮，上下方向键绑定展开上一词条和展开下一词条按钮，直接按上下键或者按ctrl+上下键都行，直接按上下键会同时触发浏览器自身的滚动，全键盘单手建议按右ctrl+上下键比较方便。

* 强制刷新：后台会缓存最近查询过的内容，调试时为了显示查询结果的变化，需要开启强制刷新，下一次查询生效。

* 跳转新标签页：默认点击entry://连接会在当前页面查询，勾选本项后，会打开新标签页进行查询，下一次查询生效。

* 强制使用全宋体：强制将所有iframe的字体改为全宋体，下一次查询生效。

* 同时展开多个词典：默认只会展开一个词典，开启后允许同时展开多个词典，但此时跳转上一个和下一个词条的按钮失效，下一次查询生效。

* 启用文字选择菜单：启用该功能后，在词典中选择文字后，会弹出菜单，有三个按钮，复制，在当前页面查询选择的词，打开新标签页查询选择的词，下一次查询生效。

* 屏蔽默认点击：词条自带的点击事件被取消，下一次查询生效。

* 新标签页正查：在全文搜索页面和单词典查询页面选择文字，单击新窗口查询，如果新标签页正查打开，则新窗口打开查询页面进行查询，否则打开全文搜索或单词典查询页面进行查询，下一次查询生效。

* 精确计算高度：计算iframe中每一个元素的高度来获取总高度，展开速度会稍慢一些，目的是解决某些词典使用absolute定位导致高度获取不正确，下一次查询生效。

* 固定高度：设置iframe的高度固定，为了解决如phet.zim这样自定义高度下显示不正常的问题，开启后精确计算高度将会无效，下一次查询生效。

* 保存为默认值：如果没有保存为默认值，则页面刷新后，设置恢复默认。

* 文字转简体和文字转繁体按钮：将当前展开的词条内容进行繁简转化。已知问题：由于使用直接替换转化，结果不准确且有未转化的字。

* 夜间模式和日间模式按钮：切换夜间样式和原本样式。已知问题：M-W Visual Dictionary词典折叠展开操作在夜间模式下无效，因为其对class进行全匹配判断。

* 随机查询按钮：随机查询一个词条。

* 在线词典：在线词典在后台admin添加，将url中查询的词改为%WORD%，有两种模式，在iframe中打开或在新标签页中打开（某些网站不支持在iframe中显示）。

### 配置文件

django-mdict/config.ini

#### [COMMON]

cache_num：查询提示缓存的个数

search_cache_num：查询（分页）缓存的个数

builtin_dic_enable：启用内置词典

es_host：elasticsearch启动url（包括端口）

open_path_enable：是否允许打开本地词典文件夹（仅本地访问有效）

ws_server_port：windows下启用ws_server的端口号（默认值8766，8765是anki connect的默认端口）

index_id：选择主页（目前只有1和2）
#### [SEARCH]

merge_entry_max_length：默认值1000，同名词条合并，同一词典有多个查询结果时，长度小于1000的词条会被合并。如果完全不合并，设置为0。

st_enable：启用繁简转化

chaizi_enable：启用拆字反查

fh_char_enable：启用全角字符转换（全角英文转换为半角英文）

kana_enable：启用假名转换（平假名和片假名相互转换）

romaji_enable：启用罗马字假名转换

force_refresh：启用强制刷新（启用后会重新查询，而不是从缓存中读取）

select_btn_enable：启用文字选择菜单（在词条中选择文字后的弹出框，仅PC有效）

disable_iframe_click：屏蔽iframe中的默认点击事件（关闭词典的自动发音和解决点击发重音的问题，下一次查询生效）

history_enable：是否保存查询历史

suggestion_num：查询提示数目

force_font：强制所有词条使用全宋体（下一次查询生效）

card_show：允许同时展开多个词条（下一次查询生效）

default_group：默认分组

new_label_link：打开新标签页（点击entry词条跳转时不在本页跳转而是打开新标签页查询，下一次查询生效）

compute_every_element：计算iframe的每一个元素来计算总高度

fixed_height：所有词条固定高度显示

copy_with_tag：复制时包含html标签和css样式

magnifier_enable：启用图片放大镜

hide-bottom-bar：隐藏底部工具栏