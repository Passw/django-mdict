<!DOCTYPE html>
<html>
    <head>
        <style>
            html,body{padding:0;margin:0;width:100%;height:100%;}
        </style>
        <script src="/static/jquery/jquery.min.js"></script>
        <script src="/static/mdict/wordcloud/wordcloud2.js"></script>
    </head>
    <body>
        <span id="wordcloud_container"></span>
        <canvas id="wordcloud_canvas"></canvas>
    </body>
    <script>
        function resizeCanvasToDisplaySize() {
           // look up the size the canvas is being displayed
           var canvas = document.getElementById('wordcloud_canvas');
           var width = canvas.clientWidth;
           var height = canvas.clientHeight;

           // If it's resolution does not match change it
           if (canvas.width !== width || canvas.height !== height) {
             canvas.width = width;
             canvas.height = height;
             return true;
           }

           return false;
        }
        function change_canvas(){
            $("#wordcloud_canvas").width($("body").width());
            $("#wordcloud_canvas").height($("body").height());
            resizeCanvasToDisplaySize();
        }
        change_canvas();
        //$(window).resize(change_canvas);
        $.ajax({
            url:"/mdict/getwordlist/",
            contentType:'json',
            type:'GET',
            success:function(data){
                var canvas=document.getElementById('wordcloud_canvas');
                var word_list=$.parseJSON(data);
                var options={"list":word_list};
                WordCloud(canvas, options);
            },
            error:function(jqXHR,textStatus,errorThrown){
                alert(jqXHR.responseText);
            },
        });
    </script>
</html>